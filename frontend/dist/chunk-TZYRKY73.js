import{a as D}from"./chunk-FT7X5CIT.js";import{b as Z,d as N,e as ee,g as te,h as A}from"./chunk-I4CRZZPC.js";import{B as n,Ba as F,C as i,D as v,E as q,F as I,G as f,I as r,J as s,O as u,Q as j,S as w,V as O,W as x,X as C,Y as R,_ as V,fa as B,ga as y,ha as G,ia as P,ja as U,la as $,n as _,oa as H,p as k,pa as W,q as L,qa as z,ra as J,s as d,sa as K,t as c,u as g,ua as Q,v as S,w as p,wa as X,y as a,ya as Y,za as b}from"./chunk-KIRRPNFL.js";var le=e=>["/employees/edit",e],pe=e=>["/workflows",e];function se(e,m){e&1&&v(0,"span",13)}function ce(e,m){e&1&&(n(0,"span"),r(1,"Delete"),i())}function ue(e,m){if(e&1){let t=q();n(0,"tr")(1,"td"),r(2),i(),n(3,"td"),r(4),i(),n(5,"td"),r(6),i(),n(7,"td"),r(8),i(),n(9,"td"),r(10),j(11,"date"),i(),n(12,"td"),r(13),i(),n(14,"td",8)(15,"div",9)(16,"a",10),r(17,"Edit"),i(),n(18,"a",10),r(19,"Workflows"),i(),n(20,"button",11),I("click",function(){let o=k(t).$implicit,E=f();return L(E.deleteEmployee(o.id))}),p(21,se,1,0,"span",12)(22,ce,2,0,"span",7),i()()()()}if(e&2){let t=m.$implicit;d(2),s(t.employeeId),d(2),s(t.user==null?null:t.user.email),d(2),s(t.position),d(2),s(t.department==null?null:t.department.name),d(2),s(w(11,11,t.hireDate,"mediumDate")),d(3),s(t.status),d(3),a("routerLink",u(14,le,t.id)),d(2),a("routerLink",u(16,pe,t.id)),d(2),a("disabled",t.isDeleting),d(),a("ngIf",t.isDeleting),d(),a("ngIf",!t.isDeleting)}}function fe(e,m){e&1&&(n(0,"tr")(1,"td",14),r(2,"No employees found"),i()())}var ie=(()=>{class e{constructor(t){this.employeeService=t,this.employees=[]}ngOnInit(){this.employeeService.getAll().subscribe(t=>this.employees=t)}deleteEmployee(t){let l=this.employees.find(o=>o.id===t);l.isDeleting=!0,this.employeeService.delete(t).subscribe(()=>this.employees=this.employees.filter(o=>o.id!==t))}static{this.\u0275fac=function(l){return new(l||e)(c(A))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:25,vars:2,consts:[[1,"p-4"],[1,"container"],["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","10%"],[2,"width","20%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-right"],[2,"display","flex","gap","0.5rem","justify-content","flex-end"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger",3,"click","disabled"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","7",1,"text-center"]],template:function(l,o){l&1&&(n(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Employees"),i(),n(4,"a",2),r(5,"Add Employee"),i(),n(6,"table",3)(7,"thead")(8,"tr")(9,"th",4),r(10,"Employee ID"),i(),n(11,"th",5),r(12,"User"),i(),n(13,"th",5),r(14,"Position"),i(),n(15,"th",5),r(16,"Department"),i(),n(17,"th",4),r(18,"Hire Date"),i(),n(19,"th",4),r(20,"Status"),i(),v(21,"th",4),i()(),n(22,"tbody"),p(23,ue,23,18,"tr",6)(24,fe,3,0,"tr",7),i()()()()),l&2&&(d(23),a("ngForOf",o.employees),d(),a("ngIf",!(o.employees!=null&&o.employees.length)))},dependencies:[x,C,b,R],encapsulation:2})}}return e})();var h=e=>({"is-invalid":e});function ve(e,m){e&1&&(n(0,"div"),r(1,"Employee ID is required"),i())}function ye(e,m){if(e&1&&(n(0,"div",17),p(1,ve,2,0,"div",18),i()),e&2){let t=f();d(),a("ngIf",t.f.employeeId.errors.required)}}function he(e,m){if(e&1&&(n(0,"option",19),r(1),i()),e&2){let t=m.$implicit;a("value",t.id),d(),s(t.email)}}function Ee(e,m){e&1&&(n(0,"div"),r(1,"User is required"),i())}function _e(e,m){if(e&1&&(n(0,"div",17),p(1,Ee,2,0,"div",18),i()),e&2){let t=f();d(),a("ngIf",t.f.userId.errors.required)}}function ge(e,m){e&1&&(n(0,"div"),r(1,"Position is required"),i())}function Se(e,m){if(e&1&&(n(0,"div",17),p(1,ge,2,0,"div",18),i()),e&2){let t=f();d(),a("ngIf",t.f.position.errors.required)}}function Ie(e,m){if(e&1&&(n(0,"option",19),r(1),i()),e&2){let t=m.$implicit;a("value",t.id),d(),s(t.name)}}function xe(e,m){e&1&&(n(0,"div"),r(1,"Department is required"),i())}function Ce(e,m){if(e&1&&(n(0,"div",17),p(1,xe,2,0,"div",18),i()),e&2){let t=f();d(),a("ngIf",t.f.departmentId.errors.required)}}function be(e,m){e&1&&(n(0,"div"),r(1,"Hire Date is required"),i())}function Ae(e,m){if(e&1&&(n(0,"div",17),p(1,be,2,0,"div",18),i()),e&2){let t=f();d(),a("ngIf",t.f.hireDate.errors.required)}}function De(e,m){e&1&&(n(0,"div",4)(1,"label"),r(2,"Status"),i(),n(3,"select",20)(4,"option",21),r(5,"Active"),i(),n(6,"option",22),r(7,"Inactive"),i()()())}var M=(()=>{class e{constructor(t,l,o,E,re,oe,de){this.formBuilder=t,this.route=l,this.router=o,this.employeeService=E,this.accountService=re,this.departmentService=oe,this.alertService=de,this.users=[],this.departments=[]}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.form=this.formBuilder.group({employeeId:["",y.required],userId:["",y.required],position:["",y.required],departmentId:["",y.required],hireDate:["",y.required],status:["Active"]}),this.accountService.getAll().subscribe(t=>this.users=t),this.departmentService.getAll().subscribe(t=>this.departments=t),this.isAddMode||this.employeeService.getById(this.id).subscribe(t=>this.form.patchValue(t))}get f(){return this.form.controls}onSubmit(){this.form.invalid||(this.isAddMode?this.createEmployee():this.updateEmployee())}createEmployee(){this.employeeService.create(this.form.value).subscribe({next:()=>{this.alertService.success("Employee created successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:t=>this.alertService.error(t)})}updateEmployee(){this.employeeService.update(this.id,this.form.value).subscribe({next:()=>{this.alertService.success("Employee updated successfully",{keepAfterRouteChange:!0}),this.router.navigate(["/employees"])},error:t=>this.alertService.error(t)})}static{this.\u0275fac=function(l){return new(l||e)(c(K),c(X),c(Y),c(A),c(Z),c(te),c(ee))}}static{this.\u0275cmp=g({type:e,selectors:[["ng-component"]],standalone:!1,decls:42,vars:26,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","employeeId",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","userId",1,"form-control",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","position",1,"form-control",3,"ngClass"],["formControlName","departmentId",1,"form-control",3,"ngClass"],["type","date","formControlName","hireDate",1,"form-control",3,"ngClass"],["class","form-group",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-primary","mr-1",3,"disabled"],["routerLink","/employees",1,"btn","btn-secondary"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["formControlName","status",1,"form-control"],["value","Active"],["value","Inactive"]],template:function(l,o){l&1&&(n(0,"div",0)(1,"h3",1),r(2),i(),n(3,"div",2)(4,"form",3),I("ngSubmit",function(){return o.onSubmit()}),n(5,"div",4)(6,"label"),r(7,"Employee ID"),i(),v(8,"input",5),p(9,ye,2,1,"div",6),i(),n(10,"div",4)(11,"label"),r(12,"User"),i(),n(13,"select",7)(14,"option",8),r(15,"Select User"),i(),p(16,he,2,2,"option",9),i(),p(17,_e,2,1,"div",6),i(),n(18,"div",4)(19,"label"),r(20,"Position"),i(),v(21,"input",10),p(22,Se,2,1,"div",6),i(),n(23,"div",4)(24,"label"),r(25,"Department"),i(),n(26,"select",11)(27,"option",8),r(28,"Select Department"),i(),p(29,Ie,2,2,"option",9),i(),p(30,Ce,2,1,"div",6),i(),n(31,"div",4)(32,"label"),r(33,"Hire Date"),i(),v(34,"input",12),p(35,Ae,2,1,"div",6),i(),p(36,De,8,0,"div",13),n(37,"div",14)(38,"button",15),r(39,"Save"),i(),n(40,"a",16),r(41,"Cancel"),i()()()()()),l&2&&(d(2),s(o.isAddMode?"Add Employee":"Edit Employee"),d(2),a("formGroup",o.form),d(4),a("ngClass",u(16,h,o.f.employeeId.touched&&o.f.employeeId.errors)),d(),a("ngIf",o.f.employeeId.touched&&o.f.employeeId.errors),d(4),a("ngClass",u(18,h,o.f.userId.touched&&o.f.userId.errors)),d(3),a("ngForOf",o.users),d(),a("ngIf",o.f.userId.touched&&o.f.userId.errors),d(4),a("ngClass",u(20,h,o.f.position.touched&&o.f.position.errors)),d(),a("ngIf",o.f.position.touched&&o.f.position.errors),d(4),a("ngClass",u(22,h,o.f.departmentId.touched&&o.f.departmentId.errors)),d(3),a("ngForOf",o.departments),d(),a("ngIf",o.f.departmentId.touched&&o.f.departmentId.errors),d(4),a("ngClass",u(24,h,o.f.hireDate.touched&&o.f.hireDate.errors)),d(),a("ngIf",o.f.hireDate.touched&&o.f.hireDate.errors),d(),a("ngIf",!o.isAddMode),d(2),a("disabled",o.form.invalid))},dependencies:[O,x,C,U,z,J,B,W,G,P,$,H,b],encapsulation:2})}}return e})();var Fe=[{path:"",component:ie,canActivate:[D]},{path:"add",component:M,canActivate:[D],data:{roles:[N.Admin]}},{path:"edit/:id",component:M,canActivate:[D],data:{roles:[N.Admin]}}],ne=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=_({imports:[F.forChild(Fe),F]})}}return e})();var Xe=(()=>{class e{static{this.\u0275fac=function(l){return new(l||e)}}static{this.\u0275mod=S({type:e})}static{this.\u0275inj=_({imports:[V,Q,ne]})}}return e})();export{Xe as EmployeesModule};
